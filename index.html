<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Modern Dark To-Do List</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: #1a1a1a;
            color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            padding: 20px;
        }

        .wrapper {
            width: 100%;
            max-width: 500px;
            background: #2c2c2c;
            border-radius: 20px;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
            overflow: hidden;
        }

        .app {
            padding: 20px;
        }

        .info {
            background: linear-gradient(135deg, #4a00e0, #3686a9);
            padding: 30px;
            border-radius: 20px 20px 0 0;
            text-align: center;
        }

        .date p {
            font-size: 1.2rem;
            margin-bottom: 5px;
        }

        .info-bottom {
            display: flex;
            justify-content: space-around;
            margin-top: 20px;
        }

        .info-bottom div {
            text-align: center;
        }

        .info-bottom p {
            font-size: 1.5rem;
            font-weight: bold;
        }

        .info-bottom p:last-child {
            font-size: 0.9rem;
            font-weight: normal;
            color: #d1d1d1;
        }

        ul {
            list-style: none;
            padding: 20px;
            max-height: 400px;
            overflow-y: auto;
        }

        ul p#today2 {
            text-align: center;
            font-size: 1.2rem;
            color: #b3b3b3;
            margin-bottom: 20px;
        }

        li {
            display: flex;
            align-items: center;
            background: #3a3a3a;
            margin-bottom: 10px;
            padding: 10px;
            border-radius: 10px;
            transition: all 0.3s ease;
        }

        li:hover {
            background: #4a4a4a;
        }

        li a.check_button i {
            font-size: 1.5rem;
            color: #ffffff;
            transition: all 0.3s ease;
        }

        li a.check_button i.mark {
            color: #00ff55;
        }

        li .right {
            flex: 1;
            margin: 0 10px;
            cursor: pointer;
        }

        li .right p {
            font-size: 1rem;
            color: #ffffff;
            outline: none;
        }

        li .right p.line-through {
            text-decoration: line-through;
            color: #b3b3b3;
            font-style: italic;
        }

        li .delete_button i {
            font-size: 1.5rem;
            color: #ff4444;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        li .delete_button i:hover {
            color: #ff6666;
        }

        .bottom {
            padding: 20px;
            text-align: center;
        }

        .bottom a#add-new, .bottom a#back-button, .bottom a#add-subtask {
            display: inline-block;
            padding: 10px 20px;
            background: linear-gradient(135deg, #4a00e0, #8e2de2);
            color: #ffffff;
            text-decoration: none;
            border-radius: 20px;
            transition: all 0.3s ease;
            margin: 5px;
        }

        .bottom a#add-new:hover, .bottom a#back-button:hover, .bottom a#add-subtask:hover {
            background: linear-gradient(135deg, #8e2de2, #4a00e0);
        }

        #copyright {
            text-align: center;
            padding: 20px;
            font-size: 0.9rem;
            color: #b3b3b3;
        }

        #copyright a {
            color: #8e2de2;
            text-decoration: none;
        }

        #copyright a:hover {
            color: #4a00e0;
        }

        /* Notes Section */
        .notes-section {
            padding: 20px;
        }

        .notes-section h3 {
            font-size: 1.2rem;
            color: #b3b3b3;
            margin-bottom: 10px;
        }

        .notes-section textarea {
            width: 100%;
            min-height: 100px;
            background: #3a3a3a;
            border: none;
            border-radius: 10px;
            padding: 10px;
            color: #ffffff;
            resize: vertical;
            outline: none;
        }

        /* Animations */
        .down_in {
            animation: down_in 0.35s ease;
        }

        @keyframes down_in {
            0% {
                opacity: 0;
                transform: scale(0.5) translateY(-55px);
            }
            70% {
                transform: scale(1.07);
            }
            100% {
                opacity: 1;
                transform: scale(1) translateY(0px);
            }
        }

        .up {
            animation: slide_up 0.6s ease;
        }

        @keyframes slide_up {
            0% {
                opacity: 1;
                transform: scale(1);
            }
            30% {
                opacity: 0;
            }
            100% {
                opacity: 0;
                transform: scale(0);
            }
        }

        /* Responsive */
        @media (max-width: 400px) {
            .wrapper {
                max-width: 100%;
            }

            .info {
                padding: 20px;
            }

            .info-bottom p {
                font-size: 1.2rem;
            }

            li .right p {
                font-size: 0.9rem;
            }
        }
    </style>
</head>
<body>
    <div class="wrapper">
        <div class="app" id="main-app">
            <div class="info">
                <div class="date">
                    <p id="day"><span id="today">Sunday,</span><span id="daymonth"> 30th</span></p>
                    <p id="month">January</p>
                </div>
                <div class="info-bottom">
                    <div class="left">
                        <p id="count">7</p>
                        <p id="tasks">Total</p>
                    </div>
                    <div class="middle">
                        <p id="remaining_done">5</p>
                        <p id="remaining_tasks">Remaining</p>
                    </div>
                    <div class="right">
                        <p id="count_done">2</p>
                        <p id="tasks_done">Done</p>
                    </div>
                </div>
            </div>

            <ul id="task-list">
                <p id="today2"><strong>Tasks</strong> for today</p>
            </ul>

            <div class="bottom">
                <a href="#" id="add-new" onmousedown="return false">
                    <i class="fas fa-plus"></i> Add new item
                </a>
            </div>
        </div>

        <div class="app" id="detail-app" style="display: none;">
            <div class="info">
                <div class="date">
                    <p id="detail-task-title">Task Details</p>
                </div>
            </div>

            <ul id="subtask-list">
                <p id="today2"><strong>Subtasks</strong></p>
            </ul>

            <div class="notes-section">
                <h3>Notes</h3>
                <textarea id="task-notes" placeholder="Add your notes here..."></textarea>
            </div>

            <div class="bottom">
                <a href="#" id="add-subtask" onmousedown="return false">
                    <i class="fas fa-plus"></i> Add new subtask
                </a>
                <a href="#" id="back-button" onmousedown="return false">
                    <i class="fas fa-arrow-left"></i> Back
                </a>
            </div>
        </div>

        <p id="copyright">Made by <strong><a href="https://ekazein495.blogspot.com/2025/02/3.html" target="_blank">me</a></strong></p>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        $(document).ready(function() {
            let check_count = 0, total = 0;
            let subtask_check_count = 0, subtask_total = 0;
            let tasks = [];
            let currentTaskIndex = null;

            // Local Storage Functions
            function saveTasks() {
                localStorage.setItem('tasks', JSON.stringify(tasks));
            }

            function loadTasksFromStorage() {
                const storedTasks = localStorage.getItem('tasks');
                if (storedTasks) {
                    tasks = JSON.parse(storedTasks);
                } else {
                    // Initialize with default tasks if no data in localStorage
                    tasks = [
                        { text: "wake up 03.00 am", checked: true, subtasks: [], notes: "" },
                        { text: "pray tahajud", checked: false, subtasks: [], notes: "" },
                        { text: "jama'ah shubuh", checked: false, subtasks: [], notes: "" },
                        { text: "work out", checked: true, subtasks: [], notes: "" },
                        { text: "Take a break", checked: false, subtasks: [], notes: "" },
                        { text: "go to kampus", checked: false, subtasks: [], notes: "" },
                        { text: "makan", checked: false, subtasks: [
                            { text: "sarapan", checked: false },
                            { text: "makan siang", checked: false },
                            { text: "makan malam", checked: false }
                        ], notes: "" }
                    ];
                }
                total = tasks.length;
                check_count = tasks.filter(task => task.checked).length;
            }

            // Custom Functions for Main Page
            function updateText() {
                $('#count').text(total);
                $('#count_done').text(check_count);
                $('#remaining_done').text(total - check_count);
            }

            function showDate() {
                const suffixMap = { 1: 'st', 2: 'nd', 3: 'rd' };
                const date = new Date();
                const dayOfMonth = date.getDate();
                const dayOfWeek = date.getDay();
                const month = date.getMonth();
                const suffix = suffixMap[dayOfMonth] || 'th';

                const dayArray = ["Sunday", "Monday", "Tuesday", "Wednesday", "Thursday", "Friday", "Saturday"];
                const monthArray = ["January", "February", "March", "April", "May", "June", "July", "August", "September", "October", "November", "December"];

                $('#today').text(dayArray[dayOfWeek] + ",");
                $('#daymonth').text(" " + dayOfMonth + suffix);
                $('#month').text(monthArray[month]);
            }

            function loadInitialTasks() {
                $('#task-list').empty().append('<p id="today2"><strong>Tasks</strong> for today</p>');
                tasks.forEach((task, index) => {
                    const li = createTaskElement(task, index);
                    $('#task-list').append(li);
                    setTimeout(() => {
                        li.addClass('down_in');
                    }, 60 * index);
                });
                updateText();
            }

            function createTaskElement(task, index) {
                const li = $(`
                    <li data-index="${index}">
                        <a href="#" class="check_button" onmousedown="return false">
                            <i class="${task.checked ? 'fas fa-check-circle mark' : 'far fa-circle'}" aria-hidden="true"></i>
                        </a>
                        <div class="right">
                            <p contenteditable="true">${task.text}</p>
                        </div>
                        <span class="delete_button" onmousedown="return false">
                            <i class="fas fa-times-circle" aria-hidden="true"></i>
                        </span>
                    </li>
                `);
                if (task.checked) {
                    li.find('.right p').addClass('line-through').attr("contentEditable", false);
                }
                return li;
            }

            // Add new task
            $('#add-new').click(function(e) {
                e.preventDefault();
                const newTask = { text: "New Task", checked: false, subtasks: [], notes: "" };
                tasks.push(newTask);
                total++;
                saveTasks();
                const li = createTaskElement(newTask, tasks.length - 1);
                $('#task-list').append(li);
                li.addClass('down_in');
                updateText();
            });

            // Edit task text
            $('#task-list').on('input', '.right p', function() {
                const index = $(this).closest('li').data('index');
                tasks[index].text = $(this).text();
                saveTasks();
            });

            // Check/Uncheck task
            $('#task-list').on('click', '.check_button', function(e) {
                e.preventDefault();
                const button = $(this).find('i');
                const index = $(this).closest('li').data('index');
                const text = $(this).siblings('.right').find('p');

                if (button.hasClass('far')) {
                    button.removeClass('far fa-circle').addClass('fas fa-check-circle mark');
                    text.addClass('line-through').attr("contentEditable", false);
                    check_count++;
                    tasks[index].checked = true;
                } else {
                    button.removeClass('fas fa-check-circle mark').addClass('far fa-circle');
                    text.removeClass('line-through').attr('contentEditable', true);
                    check_count--;
                    tasks[index].checked = false;
                }
                saveTasks();
                updateText();
            });

            // Delete task
            $('#task-list').on('click', '.delete_button', function(e) {
                e.preventDefault();
                const index = $(this).closest('li').data('index');
                const li = $(this).closest('li');
                total--;
                if (li.find('.check_button i').hasClass('mark')) check_count--;
                tasks.splice(index, 1);
                saveTasks();
                li.addClass('up');
                setTimeout(() => {
                    loadInitialTasks();
                }, 600);
                updateText();
            });

            // Navigate to detail page
            $('#task-list').on('click', '.right', function() {
                const index = $(this).closest('li').data('index');
                currentTaskIndex = index;
                const task = tasks[index];

                $('#detail-task-title').text(task.text);
                $('#task-notes').val(task.notes || "");
                loadSubtasks(task.subtasks || []);

                $('#main-app').hide();
                $('#detail-app').show();
            });

            // Detail Page Functions
            function loadSubtasks(subtasks) {
                $('#subtask-list').empty().append('<p id="today2"><strong>Subtasks</strong></p>');
                subtask_total = 0;
                subtask_check_count = 0;

                subtasks.forEach((subtask, index) => {
                    const li = createSubtaskElement(subtask, index);
                    $('#subtask-list').append(li);
                    setTimeout(() => {
                        li.addClass('down_in');
                    }, 60 * index);
                    subtask_total++;
                    if (subtask.checked) subtask_check_count++;
                });
            }

            function createSubtaskElement(subtask, index) {
                const li = $(`
                    <li data-index="${index}">
                        <a href="#" class="check_button" onmousedown="return false">
                            <i class="${subtask.checked ? 'fas fa-check-circle mark' : 'far fa-circle'}" aria-hidden="true"></i>
                        </a>
                        <div class="right">
                            <p contenteditable="true">${subtask.text}</p>
                        </div>
                        <span class="delete_button" onmousedown="return false">
                            <i class="fas fa-times-circle" aria-hidden="true"></i>
                        </span>
                    </li>
                `);
                if (subtask.checked) {
                    li.find('.right p').addClass('line-through').attr("contentEditable", false);
                }
                return li;
            }

            // Add new subtask
            $('#add-subtask').click(function(e) {
                e.preventDefault();
                const newSubtask = { text: "New Subtask", checked: false };
                tasks[currentTaskIndex].subtasks.push(newSubtask);
                saveTasks();
                const li = createSubtaskElement(newSubtask, tasks[currentTaskIndex].subtasks.length - 1);
                $('#subtask-list').append(li);
                li.addClass('down_in');
                subtask_total++;
            });

            // Edit subtask text
            $('#subtask-list').on('input', '.right p', function() {
                const index = $(this).closest('li').data('index');
                tasks[currentTaskIndex].subtasks[index].text = $(this).text();
                saveTasks();
            });

            // Check/Uncheck subtask
            $('#subtask-list').on('click', '.check_button', function(e) {
                e.preventDefault();
                const button = $(this).find('i');
                const index = $(this).closest('li').data('index');
                const text = $(this).siblings('.right').find('p');

                if (button.hasClass('far')) {
                    button.removeClass('far fa-circle').addClass('fas fa-check-circle mark');
                    text.addClass('line-through').attr("contentEditable", false);
                    subtask_check_count++;
                    tasks[currentTaskIndex].subtasks[index].checked = true;
                } else {
                    button.removeClass('fas fa-check-circle mark').addClass('far fa-circle');
                    text.removeClass('line-through').attr('contentEditable', true);
                    subtask_check_count--;
                    tasks[currentTaskIndex].subtasks[index].checked = false;
                }
                saveTasks();
            });

            // Delete subtask
            $('#subtask-list').on('click', '.delete_button', function(e) {
                e.preventDefault();
                const index = $(this).closest('li').data('index');
                const li = $(this).closest('li');
                subtask_total--;
                if (li.find('.check_button i').hasClass('mark')) subtask_check_count--;
                tasks[currentTaskIndex].subtasks.splice(index, 1);
                saveTasks();
                li.addClass('up');
                setTimeout(() => {
                    loadSubtasks(tasks[currentTaskIndex].subtasks);
                }, 600);
            });

            // Save notes
            $('#task-notes').on('input', function() {
                tasks[currentTaskIndex].notes = $(this).val();
                saveTasks();
            });

            // Back to main page
            $('#back-button').click(function(e) {
                e.preventDefault();
                $('#detail-app').hide();
                $('#main-app').show();
                loadInitialTasks();
            });

            // Initialize
            loadTasksFromStorage();
            showDate();
            loadInitialTasks();
        });
    </script>
</body>
</html>
